<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daimara Operators</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary:rgb(233, 157, 17);
  --bg:#f4f6f9;
  --card:#ffffff;
}
body{margin:0;font-family:Arial;background:var(--bg);} 
.topbar{background:var(--primary);padding:16px 24px;display:flex;justify-content:space-between;align-items:center;}
.topbar h1{margin:0;color:black;}
.btn{background:black;color:white;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;}
.container{padding:24px;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:20px;margin-bottom:25px;}
.card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 6px 15px rgba(0,0,0,0.1);} 
.table{width:100%;border-collapse:collapse;margin-top:10px;}
.table th,.table td{padding:12px;border-bottom:1px solid #eee;text-align:left;font-size:16px;}
.section{margin-top:30px;}
.section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;}
.sub-btn{padding:8px 12px;border:none;border-radius:6px;cursor:pointer;background:#111;color:var(--primary);} 
.move-btn{background:#16a34a;color:black;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;}
input[type='number']{width:70px;padding:5px;}
.email-actions button{margin-right:6px;border:none;padding:6px 10px;border-radius:6px;cursor:pointer;}
.whatsapp{background:#25D366;color:black;}
.gmail{background:#EA4335;color:black;}
.hidden{display:none;}
</style>
</head>
<body>

<div class="topbar">
  <h1>Daimara Operators Panel</h1>
  <div>
    <button class="btn" onclick="createSubWarehouse()">Create Sub-Warehouse</button>
    <button class="btn" onclick="openPlatform()">Open Platform</button>
  </div>
</div>

<div class="container">

  <!-- SUMMARY -->
  <div class="grid">
    <div class="card" onclick="toggleWarehouseView()" style="cursor:pointer;">
      <h3>Main Warehouse Stock</h3>
      <strong id="totalStock">170 Units</strong>
      <p style="font-size:12px;color:gray;">(Click to view contents only)</p>
    </div>
    <div class="card"><h3>Sub Warehouses</h3><strong id="subCount">0 Active</strong></div>
  </div>

  <!-- MAIN WAREHOUSE CONTENT ONLY -->
  <div id="warehouseSection" class="section hidden">
    <div class="section-header"><h2>Main Warehouse Contents</h2></div>
    <table class="table">
      <thead>
        <tr><th>Product</th><th>Stock</th><th>Move Qty</th><th>Action</th></tr>
      </thead>
      <tbody id="warehouseTable"></tbody>
    </table>
  </div>

  <!-- SUB WAREHOUSES -->
  <div class="section">
    <div class="section-header">
      <h2>Sub Warehouses Platforms</h2>
    </div>
    <div class="grid" id="subWarehouseList"></div>
  </div>

  <!-- CLIENT EMAILS -->
  <div class="section">
    <div class="section-header"><h2>Client Emails</h2></div>
    <table class="table">
      <thead>
        <tr><th>Email</th><th>Phone</th><th>Message</th><th>Reply</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>customer@email.com</td>
          <td>+254742120329</td>
          <td>Where is my delivery?</td>
          <td class="email-actions">
            <button class="whatsapp" onclick="window.location.href='https://wa.me/254742120329'"><i class="fab fa-whatsapp"></i></button>
            <button class="gmail" onclick="window.location.href='mailto:omondiphelix2003@gmail.com'"><i class="fas fa-envelope"></i></button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<script>
let warehouse = [
  {id:1,name:'Cooking Oil 5L',stock:120},
  {id:2,name:'Rice 2kg',stock:50}
];
let subWarehouses = [];

function renderWarehouse(){
  const table = document.getElementById('warehouseTable');
  table.innerHTML='';
  warehouse.forEach(p=>{
    table.innerHTML += `
      <tr>
        <td>${p.name}</td>
        <td id="stock-${p.id}">${p.stock}</td>
        <td><input type="number" id="move-${p.id}" min="1"></td>
        <td><button class="move-btn" onclick="moveStock(${p.id})">Move</button></td>
      </tr>`;
  });
  updateTotalStock();
}

function moveStock(id){
  const product = warehouse.find(p=>p.id===id);
  const qtyInput = document.getElementById(`move-${id}`);
  const qty = parseInt(qtyInput.value);
  if(!qty || qty<=0 || qty>product.stock){
    alert('Invalid quantity'); return;
  }
  product.stock -= qty;
  if(subWarehouses.length===0){alert('Create a sub warehouse first');return;}
  subWarehouses[0].stock.push({name:product.name,qty:qty});
  qtyInput.value='';
  renderWarehouse();
  alert(qty+' units moved successfully');
}

function createSubWarehouse(){
  const name = prompt('Enter Sub Warehouse Name:');
  if(!name) return;
  subWarehouses.push({name:name,stock:[]});
  renderSubWarehouses();
}

function renderSubWarehouses(){
  const list = document.getElementById('subWarehouseList');
  list.innerHTML='';
  subWarehouses.forEach(sw=>{
    list.innerHTML += `<div class="card"><strong>${sw.name}</strong><br>${sw.stock.length} Products</div>`;
  });
  document.getElementById('subCount').innerText = subWarehouses.length+' Active';
}

function toggleWarehouseView(){
  document.getElementById('warehouseSection').classList.toggle('hidden');
}

function openPlatform(){
  alert('Sub Warehouse Platforms Opened');
}

function updateTotalStock(){
  const total = warehouse.reduce((sum,p)=>sum+p.stock,0);
  document.getElementById('totalStock').innerText = total+' Units';
}

renderWarehouse();
</script>

</body>
</html>
