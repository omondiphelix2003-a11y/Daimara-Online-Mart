<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daimara Executive Dispatch</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root{
  --primary:rgb(233, 157, 17);
  --accent:#2563eb;
  --bg:#f4f6f9;
  --card:#ffffff;
}

body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:var(--bg);
}

.topbar{
  background:var(--primary);
  color:rgb(0, 0, 0);
  padding:16px 24px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.topbar h1{
  margin:0;
  font-size:20px;
}

.container{
  padding:24px;
}

.grid{
  display:grid;
  grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-bottom:25px;
}

.card{
  background:var(--card);
  border-radius:12px;
  padding:20px;
  box-shadow:0 6px 15px rgba(0, 0, 0, 0.911);
}

.section{
  margin-top:30px;
  color:#064e1f ;
}

.table{
  width:100%;
  border-collapse:collapse;
  background:white;
  border-radius:12px;
  overflow:hidden;
}

.table th, .table td{
  padding:12px;
  border-bottom:1px solid #eee;
  text-align:left;
  color: black;
}

.action-btn{
  border:none;
  padding:8px 12px;
  border-radius:6px;
  cursor:pointer;
  color:rgb(0, 0, 0);
}

.send{background:#13b34d}
.dispatch{background:#0a3ca8e7}

.status{
  padding:5px 10px;
  border-radius:20px;
  font-size:12px;
  font-weight:bold;
}

.pending{background:#fde68a}
.sent{background:#8ebdf7}
.dispatched{background:#87f5ae}

</style>
</head>
<body>

<div class="topbar">
  <h1>Daimara Executive Dispatch Panel</h1>
</div>

<div class="container">

  <!-- SUMMARY -->
  <div class="grid">
    <div class="card">
      <h3>Orders Awaiting Packaging</h3>
      <strong>18</strong>
    </div>
    <div class="card">
      <h3>Ready for Dispatch</h3>
      <strong>10</strong>
    </div>
    <div class="card">
      <h3>Dispatched Today</h3>
      <strong>27</strong>
    </div>
    <div class="card">
      <h3>Urgent Deliveries</h3>
      <strong>4</strong>
    </div>
  </div>

  <!-- PACKAGING & DISPATCH QUEUE -->
  <div class="section">
    <h2>Packaging & Dispatch Queue</h2>
    <table class="table">
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Client</th>
          <th>Products</th>
          <th>Destination</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>#DM2041</td>
          <td>Mercy Wanjiku</td>
          <td>Rice 2kg (5), Cooking Oil (2)</td>
          <td>Westlands</td>
          <td><span class="status pending">Awaiting Packaging</span></td>
          <td class="action-cell">
            <button class="action-btn send">Send for Packaging</button>
          </td>

        </tr>
        <tr>
          <td>#DM2042</td>
          <td>Peter Otieno</td>
          <td>Sugar 1kg (10)</td>
          <td>Karen</td>
          <td><span class="status sent">Under Packaging</span></td>
          <td>
            <button class="action-btn dispatch">Dispatch.......</button>
          </td>
        </tr>
        <tr>
          <td>#DM2043</td>
          <td>Grace Njeri</td>
          <td>Flour 2kg (8)</td>
          <td>Kilimani</td>
          <td><span class="status dispatched">Dispatched</span></td>
          <td>Completed</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {

  const summaryCards = {
    packaging: document.querySelectorAll(".card strong")[0],
    ready: document.querySelectorAll(".card strong")[1],
    dispatched: document.querySelectorAll(".card strong")[2],
    urgent: document.querySelectorAll(".card strong")[3]
  };

  function updateCounts() {
    let awaiting = document.querySelectorAll(".pending").length;
    let underPackaging = document.querySelectorAll(".sent").length;
    let dispatched = document.querySelectorAll(".dispatched").length;

    summaryCards.packaging.textContent = awaiting;
    summaryCards.ready.textContent = underPackaging;
    summaryCards.dispatched.textContent = dispatched;
  }

  document.querySelectorAll(".send").forEach(button => {
    button.addEventListener("click", () => {
      const row = button.closest("tr");
      const status = row.querySelector(".status");

      status.textContent = "Under Packaging";
      status.className = "status sent";

      button.textContent = "Dispatch";
      button.classList.remove("send");
      button.classList.add("dispatch");

      attachDispatchHandler(button);
      updateCounts();
    });
  });

  function attachDispatchHandler(button) {
    button.addEventListener("click", () => {
      const row = button.closest("tr");
      const status = row.querySelector(".status");

      status.textContent = "Dispatched";
      status.className = "status dispatched";

      row.cells[5].textContent = "Completed";
      updateCounts();
    });
  }

  document.querySelectorAll(".dispatch").forEach(btn => {
    attachDispatchHandler(btn);
  });

  updateCounts();
});

</script>


<script>
document.addEventListener("DOMContentLoaded", () => {

  // ðŸ‘¥ Packaging staff
  const packagers = [
    "James Mwangi",
    "Lucy Achieng",
    "Brian Kiptoo",
    "Faith Wambui"
  ];

  // ðŸ“Š Update dashboard summary
  function updateCounts() {
    const awaiting = document.querySelectorAll(".pending").length;
    const packaging = document.querySelectorAll(".sent").length;
    const dispatched = document.querySelectorAll(".dispatched").length;

    const cards = document.querySelectorAll(".card strong");
    cards[0].textContent = awaiting;
    cards[1].textContent = packaging;
    cards[2].textContent = dispatched;
  }

  // ðŸ“¦ Show packager selector
  function showPackagerSelector(cell, row) {

    const select = document.createElement("select");
    select.style.padding = "6px";
    select.style.borderRadius = "6px";

    const defaultOption = document.createElement("option");
    defaultOption.textContent = "Select Packager";
    defaultOption.disabled = true;
    defaultOption.selected = true;
    select.appendChild(defaultOption);

    packagers.forEach(name => {
      const option = document.createElement("option");
      option.value = name;
      option.textContent = name;
      select.appendChild(option);
    });

    const confirmBtn = document.createElement("button");
    confirmBtn.textContent = "Confirm";
    confirmBtn.className = "action-btn send";
    confirmBtn.style.marginLeft = "8px";
    confirmBtn.disabled = true;

    // replace button
    cell.innerHTML = "";
    cell.appendChild(select);
    cell.appendChild(confirmBtn);

    // enable confirm when selected
    select.addEventListener("change", () => {
      confirmBtn.disabled = false;
    });

    confirmBtn.addEventListener("click", () => {
      const selectedName = select.value;
      if (!selectedName) return;

      const status = row.querySelector(".status");

      // âœ… status changes ONLY after confirmation
      status.textContent = "Under Packaging";
      status.className = "status sent";

      cell.innerHTML = `
        Assigned to <strong>${selectedName}</strong><br>
        <button class="action-btn dispatch">Dispatch</button>
      `;

      const dispatchBtn = cell.querySelector(".dispatch");

      dispatchBtn.addEventListener("click", () => {
        status.textContent = "Dispatched";
        status.className = "status dispatched";
        cell.textContent = "Completed";
        updateCounts();
      });

      updateCounts();
    });
  }

  // attach send buttons
  document.querySelectorAll(".send").forEach(btn => {
    btn.addEventListener("click", () => {
      const row = btn.closest("tr");
      const cell = btn.closest("td");
      showPackagerSelector(cell, row);
    });
  });

  // existing dispatch buttons
  document.querySelectorAll(".dispatch").forEach(btn => {
    btn.addEventListener("click", () => {
      const row = btn.closest("tr");
      const status = row.querySelector(".status");

      status.textContent = "Dispatched";
      status.className = "status dispatched";
      btn.parentElement.textContent = "Completed";
      updateCounts();
    });
  });

  updateCounts();

});
</script>



</body>
</html>